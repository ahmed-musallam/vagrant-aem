
File { ignore => '.svn',
  source_permissions => ignore,
  backup => false,
}

Package {
  allow_virtual => false,
}

Exec {
  path => '/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin',
}

service { 'firewalld' :
  ensure => stopped,
  enable => false,
}

<% if jdkpkg and !jdkpkg.empty? %>
package { 'java' :
  ensure   => 'installed',
  source   => '/vagrant/puppet/files/<%= File.basename(jdkpkg) %>',
  provider => 'rpm',
}

Package['java'] ->
File['/opt/aem'] ->
Aem::Instance <| |>

<% else %>

class { 'java' : }

Class['java'] ->
File['/opt/aem'] ->
Aem::Instance <| |>

<% end %>

file { '/opt/aem': 
  ensure => directory,
  owner  => 'vagrant',
  group  => 'vagrant',
}

/*
aem::instance { 'author' :
  debug_port      => 30303,
  group           => 'vagrant',
  home            => '/opt/aem/author',
  jvm_mem_opts    => '-Xmx2048m',
  manage_group    => false,
  manage_user     => false,
  port            => 4502,
  runmodes        => ['localdev', 'local'],
  sample_content  => false,
  source          => '/vagrant/puppet/files/<%= File.basename(aemjar) %>',
  type            => 'author',
  user            => 'vagrant',
  version         => '6.1.0',
}

aem::instance { 'publish' :
  debug_port      => 30304,
  group           => 'vagrant',
  home            => '/opt/aem/publish',
  jvm_mem_opts    => '-Xmx2048m',
  manage_group    => false,
  manage_user     => false,
  port            => 4503,
  runmodes        => ['localdev', 'local'],
  sample_content  => false,
  source          => '/vagrant/puppet/files/<%= File.basename(aemjar) %>',
  type            => 'publish',
  user            => 'vagrant',
  version         => '6.1.0',
}
 */